===============================================================================
【タイトル】変更箇所
【作 成 日】07年06月22日
【改 訂 日】07年09月18日，07年09月17日, 07年11月12日，08年06月04日
　　　　　　08年09月10日，08年09月27日，08年11月07日，08年11月18日
===============================================================================

■はじめに
このファイルはJiST/SWANS ver.1.0.6の変更箇所を記述しています。


■変更箇所
----------------------------------------------------------------------

【パッケージ】jist.runtime.guilog
【ファイル名】GuiLog.java
【改  訂  日】2007/09/17
【変  更  点】934行目のコメントアウト
【説      明】デフォルトでエラー箇所となる部分。動作に支障なし

----------------------------------------------------------------------

【パッケージ】jist.runtime
【ファイル名】Constants.java
【改  訂  日】2007/09/17
【変  更  点】SENSITIVITY_DEFAULT，THRESHOLD_DEFAULTの値の変更
【説      明】送信半径、受信半径に関する値をの変更
　　　　　　　通信可能半径の導出式を以下に示す
　　　　　　　Pr ＝ Pt − Lp ＋ Gt ＋ Gr
　　　　　　　利得0dBのアイソトロピックアンテナで考えると、Lpは以下の式で求めることができる
　　　　　　　LB ＝ 10log10(4πd/λ)2 ＝ 20log10(4πd/λ) ＝ 20log10(4πdf/3×10^8)
　　　　　　　（Pr：受信電力 (dBm)、Pt：送信電力 (dBm)、Lp：伝搬損失 (dB)）
　　　　　　　（Gt：送信アンテナ利得 (dBi)、Gr：受信アンテナ利得 (dBi)） 

----------------------------------------------------------------------

【パッケージ】jist.swans.field
【ファイル名】Mobility.java
【改  訂  日】2007/09/17
【変  更  点】RandomWaypointの実装
【説      明】他の移動モデル同様に、引数を分解しinitメソッドに渡す

【改  訂  日】2008/09/10
【変  更  点】全てのモデルにおいて引数pausetimeの単位を統一，エラーメッセージの修正
【説      明】Teleportクラスのコンストラクタに引数として与えるpauseTimeの単位を秒に変更
　　　　　　　RandomWaypointのエラーメッセージの修正

----------------------------------------------------------------------

【パッケージ】jist.swans.field
【ファイル名】Field.java
【改  訂  日】2007/09/17
【変  更  点】startMobility(Integer, boolean)メソッドの追加
【説      明】booleanの値によって移動モデルに従うか、静止状態を保つかを決める
　　　　　　　一定の割合のノードを動かしたいときに利用

----------------------------------------------------------------------

*** 2007/10/08 802.11およびRadioNoiseについて検討する必要があります ***

【パッケージ】jist.swans.mac
【ファイル名】Mac802_11.java(検討の余地あり)
【改  訂  日】2007/09/17
【変  更  点】RTS/CTS処理の追加，シーケンスナンバー追加処理の変更
　　　　　　　受信時のシーケンスナンバー処理の変更
　　　　　　　プロミスキャスモードの受信時の処理変更
【説      明】RTS/CTSを利用できるように変更
　　　　　　　802.11の仕様に従い、再送時にシーケンスナンバーが加算されるのを修正
　　　　　　　受信時に上の層に渡す判定を厳格化
　　　　　　　プロミスキャスモードで受信時にACK応答時間待機してからネットワーク層に渡すよう修正

【改  訂  日】2007/09/19
【変  更  点】ブロードキャスト受信時処理修正
【説      明】DIFSが発生しないための応急処置

【改  訂  日】2007/10/01
【変  更  点】ブロードキャスト送信時処理修正
【説      明】送信後にリトライ値をリセット

【改  訂  日】2007/10/08
【変  更  点】ACK受信時処修正，CTS受信後処理修正，BO後の処理修正，送信前処理修正
【説      明】DIFSが発生しないための応急処置，CTS受信時にCWをリセット
　　　　　　　BO後にキャリアセンス処理を追加
　　　　　　　送信前に無線の状態を調べる処理を追加

【改  訂  日】2008/01/07
【変  更  点】データ受信処理修正
【説      明】データ受信時のシーケンスナンバー判定を修正

【改  訂  日】2008/06/04
【変  更  点】プロミスキャスモードの動作を修正
【説      明】データ受信時に受信完了までsleepする

【改  訂  日】2008/09/10
【変  更  点】timeoutの動作を一部変更 2007/10/08の処理の再修正
【説      明】case SBOにおいて、パケットの有無を確認してからキャリアセンス処理を行うように修正

【改  訂  日】2008/11/07
【変  更  点】timeoutの動作を一部変更 2007/10/08の処理および2008/09/10の処理を再修正
【説      明】送信直前のキャリアセンス処理において、ビジー時のretryを訂正

----------------------------------------------------------------------

【パッケージ】jist.swans.net
【ファイル名】NetIp.java
【改  訂  日】2007/09/17
【変  更  点】TTL減算処理変更，キューサイズ変更，フラッディング処理の追加、受信判定の変更
【説      明】TTLが0でも再送してしまう問題を修正
　　　　　　　キューのサイズを増加
　　　　　　　TCPおよびUDPメッセージ時のみフラッディング処理が可能
　　　　　　　フラッディングの際、既に送信済みでないかを判定

【改  訂  日】2007/11/12
【変  更  点】利用するMessageQueueのクラス変更
【説      明】インターフェース登録時に利用するMessageQueueのクラスを変更

【改  訂  日】2008/09/29
【変  更  点】一部変数名およびreceive()
【説      明】フラッディングの動作を変更
　　　　　　　2007/09/17のフラッディングの関する処理を削除
　　　　　　　初期状態ではフラッディングは無効になっています

【改  訂  日】2008/11/18
【変  更  点】receive()内の受信判定
【説      明】フラッディングの動作時の受信判定を修正
　　　　　　　2007/09/17の受信判定の変更を削除･変更

----------------------------------------------------------------------

【パッケージ】jist.swans.net
【ファイル名】BroadcastCache.java
【改  訂  日】2007/09/17
【変  更  点】新規設計
【説      明】フラッディングの際の送信済み判定処理用に新規作成

【改  訂  日】2008/09/29
【変  更  点】削除
【説      明】FloodingInaterfaceに変更

----------------------------------------------------------------------

【パッケージ】jist.swans.net
【ファイル名】FloodingInterface.java
【改  訂  日】2008/09/29
【変  更  点】新規設計
【説      明】フラッディング用に設計　インタフェースおよび実装したクラス

----------------------------------------------------------------------

【パッケージ】jist.swans.net
【ファイル名】MessageQueue.java
【改  訂  日】2007/09/17
【変  更  点】キューサイズを超過した場合の処理を変更
【説      明】キューサイズを超過した場合，登録しようとしたパケットをドロップ

【改  訂  日】2007/11/12
【変  更  点】上記09/17の修正を削除，DropQueueクラスを新規設計
【説      明】09/17の修正はDropQueueクラスで行う

----------------------------------------------------------------------

【パッケージ】jist.swans.route
【ファイル名】RouteInterface.java
【改  訂  日】2007/11/13
【変  更  点】メソッドの追加
【説      明】RouteInterface.RouteAodvインターフェース内に
　　　　　　　RREQUnicastTimeout(Object, NetMessage, MacAddress)追加

----------------------------------------------------------------------

【パッケージ】jist.swans.route
【ファイル名】RouteAodv.java
【改  訂  日】2007/11/13
【変  更  点】定数の変更と追加
　　　　　　　RouteRequestクラスにunicast(MacAddress)メソッドを追加
　　　　　　　自身のエントリのアップデート方法変更
　　　　　　　RouteTableクラスにlookup(MacAddress)メソッドの追加
　　　　　　　RouteTableEntryクラスにフィールド変数追加
　　　　　　　RouteTableEntryクラスに新規フィールド変数用処理の追加
　　　　　　　MessageQueueクラスにフィールド変数追加
　　　　　　　MessageQueueクラスに新規フィールド変数処理の追加
　　　　　　　MessageQueueクラスdequeueAndSend(NetAddress, MacAddress)の処理内容変更
　　　　　　　PrecursorSetクラスsendRERR(LinkedList, byte)の処理内容変更
　　　　　　　OutgoingSetクラスにremove(MacAddress)の追加
　　　　　　　OutgoingInfoクラスにフィールド変数追加
　　　　　　　OutgoingInfoクラスコンストラクタ処理変更，getLastMsgTime()追加
　　　　　　　RREQUnicastTimeout(Object, NetMessage, MacAddress)追加
　　　　　　　timeout()の処理内容変更
　　　　　　　broadcastHello()追加
　　　　　　　sendIpMsg(Ip, MacAddress)の処理内容変更
　　　　　　　peek(NetMessage, MacAddress)の処理内容変更
　　　　　　　send(NetMessage)の処理内容変更
　　　　　　　receive(Message, NetAddress, MacAddress, byte, NetAddress, byte, byte)処理内容変更
　　　　　　　receiveRouteRequestMessage(RouteRequestMessage, NetAddress, MacAddress, NetAddress, byte, byte)処理内容変更
　　　　　　　receiveRouteReplyMessage(RouteReplyMessage, NetAddress, MacAddress, NetAddress, byte, byte)処理内容変更
　　　　　　　receiveHelloMessage(HelloMessage, MacAddress)の追加
　　　　　　　generateRouteReplyMessage(RouteRequestMessage, boolean, RouteTableEntry)処理内容変更
　　　　　　　computeRREQTimeout(byte)処理内容変更
　　　　　　　getHops(NetAddress)の削除
【説      明】定数の値の変更と一部削除および追加
　　　　　　　RREQをユニキャスト送信するメソッドの追加
　　　　　　　自身の経路情報の更新手法の変更
　　　　　　　MACアドレスからIPアドレスを求めるメソッドの追加
　　　　　　　RouteTableEntryに最終(最新)登録時間の変数追加
　　　　　　　エントリの登録時間を取得するメソッドの追加
　　　　　　　隣接ネットアドレスを通るあて先ネットアドレスの対応Mapの追加
　　　　　　　マップへの登録用メソッドと削除メソッドの追加
　　　　　　　RERRメッセージをブロードキャストで送信するように変更
　　　　　　　OutgoingSetから削除するメソッドの追加
　　　　　　　最終送信時間を持つフィールド変数の追加
　　　　　　　最終送信時間の設定および取得用の処理の追加
　　　　　　　RREQユニキャスト送信用タイムアウトメソッドの追加
　　　　　　　Helloメッセージを出すために呼び出すメソッドを変更
　　　　　　　Helloメッセージをブロードキャスト送信するメソッドの追加
　　　　　　　ブロードキャスト送信後に最終ブロードキャスト送信時間を更新
　　　　　　　HelloWaitCountのリセット方式の変更
　　　　　　　nexthopが期限内であるかどうかによる処理わけの追加
　　　　　　　Helloメッセージ受信時の呼び出すメソッドの変更
　　　　　　　RREQが自身宛てであるかどうかの判定の変更
　　　　　　　ルーチングテーブル更新時にOutgoingSetに加えないよう変更
　　　　　　　ルーチングテーブルが更新できるよう拡張したreceiveHelloMessage(HelloMessage, MacAddress)の追加
　　　　　　　自身の経路エントリの更新方法変更とRREP送信後OutgoingSetに加えないよう変更
　　　　　　　返却値の計算方法変更
　　　　　　　独自追加処理だった部分の削除

----------------------------------------------------------------------

【パッケージ】jist.swans.trans
【ファイル名】TransInterface.java TransUdpInterface内
【改  訂  日】2007/09/17
【変  更  点】send(Message, NetAddress, int, int, byte, byte)メソッドの追加
【説      明】TTLを指定して送信するために追加

----------------------------------------------------------------------

【パッケージ】jist.swans.trans
【ファイル名】TransUdp.java
【改  訂  日】2007/09/17
【変  更  点】send(Message, NetAddress, int, int, byte, byte)メソッドの追加
【説      明】TTLを指定して送信するための処理

----------------------------------------------------------------------

【パッケージ】jist.swans.trans
【ファイル名】TcpSocket.java
【改  訂  日】2007/09/17
【変  更  点】onEstablishedState (TcpMessage)メソッドに1行追加
　　　　　　　getBytesFromSocket (int)メソッドに1行追加
【説      明】FINパケットを受信後、nullデータをchannelに渡すための処理を追加
　　　　　　　Socketがデータを取得しにきた場合において、
　　　　　　　受け渡すデータがnullであれば直ちにnullを返すように変更

----------------------------------------------------------------------

【パッケージ】jist.swans.app.net
【ファイル名】UdpSocket.java
【改  訂  日】2007/09/17
【変  更  点】jist.swans.trans.TransInterface.TransUdpInterfaceのインポート
　　　　　　　udpEntityの型をTransUdpInterfaceに変更
　　　　　　　send(DatagramPacket)メソッドの変更
　　　　　　　バイト型変数ttlの追加
　　　　　　　setTimeToLive(byte)メソッドの追加
【説      明】TTLを指定して送信できるように変更
　　　　　　　setTimeToLiveメソッドでTTLを指定
　　　　　　　

----------------------------------------------------------------------